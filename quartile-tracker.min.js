//! Quartile Tracker, http://tpkn.me/
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QuartileTracker(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e instanceof Element))throw new TypeError("Expected a DOM element");if("object"!==_typeof(t))throw new TypeError("Expected an Object");var o,r,i,f,u=n.auto_reset,c=void 0===u?1:u,a=0,d=0,l=0,p=e.loop;function y(){a=e.duration||0,g("time:",(d=e.currentTime||0)+"s");for(var n=0,u=t.length;n<u;n++)if((o=t[n]).active){var c=o;r=c.time,i=c.pixel,f=c.callback,("string"==typeof r&&r.indexOf("%")===r.length-1?d/a*100:d)>=parseInt(r)&&(void 0!==i&&m(i),"function"==typeof f&&f(),o.active=0,g("tracker (",r,"):",i))}}function s(){c&&v(),p&&e.play()}function m(e){var t=new Image;t.src=e,t.onload=t.onerror=function(){t=null}}function v(){for(var e=0,n=t.length;e<n;e++)t[e].active=1;g("- QT reset -")}function b(){e.removeEventListener("timeupdate",y),e.removeEventListener("ended",s),g("- QT destroy -")}function T(){g("debug:",(l=!l)?"on":"off")}function g(){l&&console.log(Object.values(arguments).join(" "))}return p&&(e.loop=0),v(),e.addEventListener("timeupdate",y),e.addEventListener("ended",s),{reset:v,destroy:b,debug:T}}"undefined"!=typeof module&&void 0!==module.exports?module.exports=QuartileTracker:"function"==typeof define&&define.amd?define([],(function(){return QuartileTracker})):window.QuartileTracker=QuartileTracker;