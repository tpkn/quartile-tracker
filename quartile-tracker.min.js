//! Quartile Tracker, http://tpkn.me/
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QuartileTracker(e,t){if(!(e instanceof Element))throw new TypeError("Expected a DOM element");if("object"!==_typeof(t))throw new TypeError("Expected an Object");var n,o,r,i,f=0,u=0,c=0,a=e.loop;function l(){f=e.duration||0,s("time:",(u=e.currentTime||0)+"s");for(var c=0,a=t.length;c<a;c++)(n=t[c]).active&&(o=n.time,("string"==typeof o&&o.indexOf("%")===o.length-1?u/f*100:u)>=parseInt(o)&&(void 0!==(r=n.pixel)&&p(r),"function"==typeof(i=n.callback)&&i(),n.active=0,s("tracker (",o,"):",r)))}function d(){y(),a&&e.play()}function p(e){var t=new Image;t.src=e,t.onload=t.onerror=function(){t=null}}function y(){for(var e=0,n=t.length;e<n;e++)t[e].active=1;s("- reset -")}function s(){c&&console.log(Object.values(arguments).join(" "))}return a&&(e.loop=0),y(),e.addEventListener("timeupdate",l),e.addEventListener("ended",d),{reset:y,destroy:function(){e.removeEventListener("timeupdate",l),e.removeEventListener("ended",d),s("- destroy -")},debug:function(){s("debug:",(c=!c)?"on":"off")}}}"undefined"!=typeof module&&void 0!==module.exports?module.exports=QuartileTracker:"function"==typeof define&&define.amd?define([],(function(){return QuartileTracker})):window.QuartileTracker=QuartileTracker;